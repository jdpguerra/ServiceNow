{
    "instance": {
        "name": "dev115462",
        "url": "https://dev115462.service-now.com",
        "g_ck": "b3c0cd5797111110e6feb846f053afa488be687d988cb9443547f76919aaeef1513394e9"
    },
    "action": "saveWidget",
    "tableName": "sp_widget",
    "name": "Approvals_guerra",
    "sys_id": "fc0d05df97911110e6feb846f053af30",
    "widget": {
        "template": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Body HTML template",
            "sys_readonly": false,
            "type": "html_template",
            "mandatory": false,
            "displayValue": "<div class=\"panel panel-{{::options.color}} b\" ng-if=\"data.showApprovals\">\n  <div class=\"panel-heading\">\n    <h3 class=\"h4 panel-title\">\n      <fa ng-if=\"::options.glyph.length\" name=\"{{::options.glyph}}\" class=\"m-r-sm\" ></fa>\n      ${My Approvals}\n      <label ng-if=\"data.pagination.showPagination && (data.pagination.from <= data.pagination.to)\" class=\"pull-right text-info\">\n        <span ng-if=\"data.pagination.from != data.pagination.to\">\n          {{data.pagination.from}} ${to_lower}\n        </span>\n        {{data.pagination.to}} ${of} {{data.pagination.of}}\n      </label>\n    </h3>\n  </div>\n  <div class=\"panel-body\" ng-class=\"{'padder-b-none': data.approvals.length != 0}\">\n    <div ng-if=\"data.approvals.length == 0 && data.pagination.of == 0\" tabindex=\"-1\" id=\"no-approval\">\n      ${You have no pending approvals}\n    </div>\n    <div ng-if=\"data.approvals.length == 0 && data.pagination.of != 0\">\n      ${Loading approvals...}\n    </div>\n    <div ng-repeat=\"approval in data.approvals\" class=\"sp-approval m-b-xl\">\n      <div class=\"row\">\n        <div ng-class=\"contentColClass\">\n          <div ng-if=\"approval.task.number || approval.task.short_description\">\n            <a ng-href=\"?id=approval&table=sysapproval_approver&sys_id={{::approval.sys_id}}\" id=\"approval_task_{{::approval.sys_id}}\"title=\"{{data.ViewApprovalPageMsg}}\">\n              <span ng-if=\"approval.task.number\">{{::approval.task.number}}</span>\n              <span ng-if=\"approval.task.number && approval.task.short_description\"> - </span>\n              <span ng-if=\"approval.task.short_description\">{{::approval.task.short_description}}</span>\n            </a>\n          </div>\n          <div ng-if=\"approval.task.opened_by\"><label>${Requestor}</label> {{::approval.task.opened_by}}</div>\n          <div ng-if=\"approval.task.approver\"><label>${Approver}</label> {{::approval.task.approver}}</div>\n          <div ng-if=\"approval.task.start_date\"><label>${Start}</label> {{::approval.task.start_date}}</div>\n          <div ng-if=\"approval.task.end_date\"><label>${End}</label> {{::approval.task.end_date}}</div>\n          <div ng-if=\"approval.task.quantity\"><label>${Quantity}</label> {{::approval.task.quantity}}</div>\n          <div ng-if=\"approval.task.price\"><label>${Price}</label> {{::approval.task.price}}\n            <span ng-if=\"approval.task.recurring_price\"><label>${Recurring price}</label> {{::approval.task.recurring_price}} {{::approval.task.recurring_frequency}}</span>\n            <label ng-if=\"approval.task.quantity && approval.task.quantity > 1\"> ${each}</label>\n          </div>\n          <div ng-if=\"approval.items.length == 1\">\n            <div ng-repeat=\"item in approval.items\">\n             <sp-widget ng-if=\"item.variableSummarizerWidget\" widget=\"item.variableSummarizerWidget\"></sp-widget> \n            </div>\n          </div>\n          <sp-widget ng-if=\"approval.variableSummarizerWidget\" widget=\"approval.variableSummarizerWidget\"></sp-widget>\n          \n          </div>\n        <div ng-if=\"!options.portal\" class=\"col-sm-4\">\n          <button name=\"approve\" id=\"approve_button_{{::approval.sys_id}}\" aria-labelledby=\" approve_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" ng-if=\"approval.state == 'requested'\" class=\"btn btn-primary btn-block\" style=\"border-width:1px;\" ng-click=\"approve(approval.sys_id, approval.requireEsigApproval);\">${Approve}</button>\n          <button name=\"reject\" id=\"reject_button_{{::approval.sys_id}}\" aria-labelledby=\" reject_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" ng-if=\"approval.state == 'requested'\" class=\"btn btn-default btn-block\" ng-click=\"reject(approval.sys_id, approval.requireEsigApproval);\">${Reject}</button>\n          <button ng-if=\"approval.state == 'approved'\" class=\"btn btn-success btn-block\">{{approval.stateLabel}}</button>\n          <button ng-if=\"approval.state == 'rejected'\" class=\"btn btn-danger btn-block\">{{approval.stateLabel}}</button>\n          <button ng-if=\"approval.state != 'requested'\" class=\"btn btn-default btn-block\" style=\"visibility:hidden\">{{approval.stateLabel}}</button>\n        </div>\n        <div ng-if=\"options.portal && approval.state == 'requested'\" class=\"col-xs-6\">\n          <button name=\"reject\" id=\"reject_button_{{::approval.sys_id}}\" aria-labelledby=\" reject_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" class=\"btn btn-default btn-block\" ng-click=\"reject(approval.sys_id, approval.requireEsigApproval);\">${Reject}</button>\n        </div>\n        <div ng-if=\"options.portal && approval.state == 'requested'\" class=\"col-xs-6\">\n          <button name=\"approve\" id=\"approve_button_{{::approval.sys_id}}\" aria-labelledby=\" approve_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" class=\"btn btn-primary btn-block\" ng-click=\"approve(approval.sys_id, approval.requireEsigApproval);\">${Approve}</button>\n        </div>\n        <div ng-if=\"options.portal && approval.state != 'requested'\" class=\"col-xs-12\">\n          <button ng-if=\"approval.state == 'approved'\" class=\"btn btn-success btn-block\">{{approval.stateLabel}}</button>\n          <button ng-if=\"approval.state == 'rejected'\" class=\"btn btn-danger btn-block\">{{approval.stateLabel}}</button>\n        </div>\n      </div>\n    </div> <!-- body -->\n       \n  </div> \n  <div class=\"panel-footer clearfix\" ng-if=\"data.pagination.showPagination\">\n    <a id=\"previous-btn\" href=\"javascript:void(0)\" ng-click=\"previousPage()\" ng-show=\"data.pagination.hasPrevious\" class=\"pull-left btn btn-sm btn-default\" aria-label=\"${Pagination button Previous}\">\n      <i class=\"fa fa-arrow-left m-r-sm\" aria-hidden=\"true\"></i>${Previous}</a>\n    <a id=\"next_btn\" href=\"javascript:void(0)\" ng-click=\"nextPage()\" ng-show=\"data.pagination.hasNext\" class=\"pull-right btn btn-sm btn-default \" aria-label=\"${Pagination button Next}\">\n      ${Next}<i class=\"fa fa-arrow-right m-r-sm col-md-offset-3\" aria-hidden=\"true\"></i></a>\n</div>\n</div>",
            "readonly": false,
            "hint": "",
            "name": "template",
            "attributes": {},
            "choice": 0,
            "value": "<div class=\"panel panel-{{::options.color}} b\" ng-if=\"data.showApprovals\">\n  <div class=\"panel-heading\">\n    <h3 class=\"h4 panel-title\">\n      <fa ng-if=\"::options.glyph.length\" name=\"{{::options.glyph}}\" class=\"m-r-sm\" ></fa>\n      ${My Approvals}\n      <label ng-if=\"data.pagination.showPagination && (data.pagination.from <= data.pagination.to)\" class=\"pull-right text-info\">\n        <span ng-if=\"data.pagination.from != data.pagination.to\">\n          {{data.pagination.from}} ${to_lower}\n        </span>\n        {{data.pagination.to}} ${of} {{data.pagination.of}}\n      </label>\n    </h3>\n  </div>\n  <div class=\"panel-body\" ng-class=\"{'padder-b-none': data.approvals.length != 0}\">\n    <div ng-if=\"data.approvals.length == 0 && data.pagination.of == 0\" tabindex=\"-1\" id=\"no-approval\">\n      ${You have no pending approvals}\n    </div>\n    <div ng-if=\"data.approvals.length == 0 && data.pagination.of != 0\">\n      ${Loading approvals...}\n    </div>\n    <div ng-repeat=\"approval in data.approvals\" class=\"sp-approval m-b-xl\">\n      <div class=\"row\">\n        <div ng-class=\"contentColClass\">\n          <div ng-if=\"approval.task.number || approval.task.short_description\">\n            <a ng-href=\"?id=approval&table=sysapproval_approver&sys_id={{::approval.sys_id}}\" id=\"approval_task_{{::approval.sys_id}}\"title=\"{{data.ViewApprovalPageMsg}}\">\n              <span ng-if=\"approval.task.number\">{{::approval.task.number}}</span>\n              <span ng-if=\"approval.task.number && approval.task.short_description\"> - </span>\n              <span ng-if=\"approval.task.short_description\">{{::approval.task.short_description}}</span>\n            </a>\n          </div>\n          <div ng-if=\"approval.task.opened_by\"><label>${Requestor}</label> {{::approval.task.opened_by}}</div>\n          <div ng-if=\"approval.task.approver\"><label>${Approver}</label> {{::approval.task.approver}}</div>\n          <div ng-if=\"approval.task.start_date\"><label>${Start}</label> {{::approval.task.start_date}}</div>\n          <div ng-if=\"approval.task.end_date\"><label>${End}</label> {{::approval.task.end_date}}</div>\n          <div ng-if=\"approval.task.quantity\"><label>${Quantity}</label> {{::approval.task.quantity}}</div>\n          <div ng-if=\"approval.task.price\"><label>${Price}</label> {{::approval.task.price}}\n            <span ng-if=\"approval.task.recurring_price\"><label>${Recurring price}</label> {{::approval.task.recurring_price}} {{::approval.task.recurring_frequency}}</span>\n            <label ng-if=\"approval.task.quantity && approval.task.quantity > 1\"> ${each}</label>\n          </div>\n          <div ng-if=\"approval.items.length == 1\">\n            <div ng-repeat=\"item in approval.items\">\n             <sp-widget ng-if=\"item.variableSummarizerWidget\" widget=\"item.variableSummarizerWidget\"></sp-widget> \n            </div>\n          </div>\n          <sp-widget ng-if=\"approval.variableSummarizerWidget\" widget=\"approval.variableSummarizerWidget\"></sp-widget>\n          \n          </div>\n        <div ng-if=\"!options.portal\" class=\"col-sm-4\">\n          <button name=\"approve\" id=\"approve_button_{{::approval.sys_id}}\" aria-labelledby=\" approve_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" ng-if=\"approval.state == 'requested'\" class=\"btn btn-primary btn-block\" style=\"border-width:1px;\" ng-click=\"approve(approval.sys_id, approval.requireEsigApproval);\">${Approve}</button>\n          <button name=\"reject\" id=\"reject_button_{{::approval.sys_id}}\" aria-labelledby=\" reject_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" ng-if=\"approval.state == 'requested'\" class=\"btn btn-default btn-block\" ng-click=\"reject(approval.sys_id, approval.requireEsigApproval);\">${Reject}</button>\n          <button ng-if=\"approval.state == 'approved'\" class=\"btn btn-success btn-block\">{{approval.stateLabel}}</button>\n          <button ng-if=\"approval.state == 'rejected'\" class=\"btn btn-danger btn-block\">{{approval.stateLabel}}</button>\n          <button ng-if=\"approval.state != 'requested'\" class=\"btn btn-default btn-block\" style=\"visibility:hidden\">{{approval.stateLabel}}</button>\n        </div>\n        <div ng-if=\"options.portal && approval.state == 'requested'\" class=\"col-xs-6\">\n          <button name=\"reject\" id=\"reject_button_{{::approval.sys_id}}\" aria-labelledby=\" reject_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" class=\"btn btn-default btn-block\" ng-click=\"reject(approval.sys_id, approval.requireEsigApproval);\">${Reject}</button>\n        </div>\n        <div ng-if=\"options.portal && approval.state == 'requested'\" class=\"col-xs-6\">\n          <button name=\"approve\" id=\"approve_button_{{::approval.sys_id}}\" aria-labelledby=\" approve_button_{{::approval.sys_id}} approval_task_{{::approval.sys_id}}\" class=\"btn btn-primary btn-block\" ng-click=\"approve(approval.sys_id, approval.requireEsigApproval);\">${Approve}</button>\n        </div>\n        <div ng-if=\"options.portal && approval.state != 'requested'\" class=\"col-xs-12\">\n          <button ng-if=\"approval.state == 'approved'\" class=\"btn btn-success btn-block\">{{approval.stateLabel}}</button>\n          <button ng-if=\"approval.state == 'rejected'\" class=\"btn btn-danger btn-block\">{{approval.stateLabel}}</button>\n        </div>\n      </div>\n    </div> <!-- body -->\n       \n  </div> \n  <div class=\"panel-footer clearfix\" ng-if=\"data.pagination.showPagination\">\n    <a id=\"previous-btn\" href=\"javascript:void(0)\" ng-click=\"previousPage()\" ng-show=\"data.pagination.hasPrevious\" class=\"pull-left btn btn-sm btn-default\" aria-label=\"${Pagination button Previous}\">\n      <i class=\"fa fa-arrow-left m-r-sm\" aria-hidden=\"true\"></i>${Previous}</a>\n    <a id=\"next_btn\" href=\"javascript:void(0)\" ng-click=\"nextPage()\" ng-show=\"data.pagination.hasNext\" class=\"pull-right btn btn-sm btn-default \" aria-label=\"${Pagination button Next}\">\n      ${Next}<i class=\"fa fa-arrow-right m-r-sm col-md-offset-3\" aria-hidden=\"true\"></i></a>\n</div>\n</div>",
            "max_length": 65000,
            "ed": {
                "name": "template"
            }
        },
        "css": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "CSS",
            "sys_readonly": false,
            "type": "css",
            "mandatory": false,
            "displayValue": ".pre-wrap {\n  white-space:pre-wrap;\n}\n\n.col-sm-4 {\n  padding-left: 0px;\n}\n\t    \n@media screen and (max-width: 992px) {\n  .col-sm-4 {\n    padding-right: 0px;\n  }\n\n  .col-sm-8 {\n    padding-left: 0px;\n  }\n}",
            "readonly": false,
            "hint": "",
            "name": "css",
            "attributes": {},
            "choice": 0,
            "value": ".pre-wrap {\n  white-space:pre-wrap;\n}\n\n.col-sm-4 {\n  padding-left: 0px;\n}\n\t    \n@media screen and (max-width: 992px) {\n  .col-sm-4 {\n    padding-right: 0px;\n  }\n\n  .col-sm-8 {\n    padding-left: 0px;\n  }\n}",
            "max_length": 8000,
            "ed": {
                "name": "css"
            }
        },
        "roles": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": 12,
            "label": "Roles",
            "sys_readonly": false,
            "type": "user_roles",
            "mandatory": false,
            "displayValue": "",
            "readonly": false,
            "hint": "",
            "name": "roles",
            "attributes": {
                "no_truncate": "true",
                "update_exempt": "true",
                "record_watcher_blacklist": "true"
            },
            "choice": 0,
            "value": "",
            "max_length": 255,
            "ed": {
                "name": "roles"
            }
        },
        "link": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Link",
            "sys_readonly": false,
            "type": "script",
            "mandatory": false,
            "displayValue": "function link(scope, element, attrs, controller) {\r  \r}",
            "readonly": false,
            "hint": "",
            "name": "link",
            "attributes": {
                "client_script": "true"
            },
            "choice": 0,
            "value": "function link(scope, element, attrs, controller) {\r  \r}",
            "max_length": 65000,
            "ed": {
                "name": "link"
            }
        },
        "description": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Description",
            "sys_readonly": false,
            "type": "string",
            "mandatory": false,
            "displayValue": "",
            "readonly": false,
            "hint": "Defines what the widget does",
            "name": "description",
            "attributes": {
                "edge_encryption_enabled": "true"
            },
            "choice": 0,
            "value": "",
            "max_length": 300,
            "ed": {
                "name": "description"
            }
        },
        "demo_data": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Demo data",
            "sys_readonly": false,
            "type": "json",
            "mandatory": false,
            "displayValue": "",
            "readonly": false,
            "hint": "",
            "name": "demo_data",
            "attributes": {},
            "choice": 0,
            "value": "",
            "max_length": 8000,
            "ed": {
                "name": "demo_data"
            }
        },
        "option_schema": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Option schema",
            "sys_readonly": false,
            "type": "json",
            "mandatory": false,
            "displayValue": "[{\"hint\":\"If false, buttons are stacked on the right; if true, they are side-by-side\",\"name\":\"portal\",\"section\":\"Presentation\",\"label\":\"Buttons stacked side by side\",\"type\":\"boolean\"},{\"hint\":\"Maximum number of elements that are shown in the list of approvals\",\"name\":\"max_number_of_elements_shown_on_the_list\",\"default_value\":\"10\",\"section\":\"Presentation\",\"label\":\"Max number of elements shown in the list (only positive numbers > 0, 10 otherwise)\",\"type\":\"integer\"}]",
            "readonly": false,
            "hint": "",
            "name": "option_schema",
            "attributes": {},
            "choice": 0,
            "value": "[{\"hint\":\"If false, buttons are stacked on the right; if true, they are side-by-side\",\"name\":\"portal\",\"section\":\"Presentation\",\"label\":\"Buttons stacked side by side\",\"type\":\"boolean\"},{\"hint\":\"Maximum number of elements that are shown in the list of approvals\",\"name\":\"max_number_of_elements_shown_on_the_list\",\"default_value\":\"10\",\"section\":\"Presentation\",\"label\":\"Max number of elements shown in the list (only positive numbers > 0, 10 otherwise)\",\"type\":\"integer\"}]",
            "max_length": 8000,
            "ed": {
                "name": "option_schema"
            }
        },
        "script": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Server script",
            "sys_readonly": false,
            "type": "script",
            "mandatory": false,
            "displayValue": "g_approval_form_request = true;\n\n//we get only a max number of elements to avoid to have a big list of it\nvar maxNumberOfItemsInTheList = parseInt(options.max_number_of_elements_shown_on_the_list);\n//set 10 if maxnumber is undefined, empty or negative value\nmaxNumberOfItemsInTheList = maxNumberOfItemsInTheList>0 ? maxNumberOfItemsInTheList : 10; \nvar initRow = 0;\nvar lastRow = maxNumberOfItemsInTheList;\nvar currentPage = 0; //0 is the first page\nif (input) {\n\t// update pagination\n\tcurrentPage = input.pagination.currentPage;\n\tinitRow = (currentPage * maxNumberOfItemsInTheList);\n\tlastRow = initRow + maxNumberOfItemsInTheList;\n\t\n\tif (input.op == 'approved' || input.op == 'rejected') {\n\t\tvar app = new GlideRecord(\"sysapproval_approver\");\n\t\tif (app.get(input.target)) {\n\t\t\tvar isMine = gs.hasRole(\"approval_admin\") || (gs.hasRole(\"approver_user\") && isApprovalMine(app));\n\t\t\tif (isMine) {\n\t\t\t\tapp.state = input.op;\n\t\t\t\tapp.update();\n\t\t\t\tif (currentPage > 0 && !input.pagination.hasNext && input.approvals.length == 1) {\n\t\t\t\t\tcurrentPage--;\n\t\t\t\t\tinitRow = (currentPage * maxNumberOfItemsInTheList);\n\t\t\t\t\tlastRow = initRow + maxNumberOfItemsInTheList;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\ndata.ViewApprovalPageMsg = gs.getMessage(\"View approval page\");\ndata.esignature = {\n\tusername:  gs.getUserName(),\n\tuserSysId: gs.getUserID(),\n\te_sig_required: GlidePluginManager.isRegistered('com.glide.e_signature_approvals')\n};\n\nvar esigRequiredMap = {};\nif (data.esignature.e_sig_required) {\n\tvar esigRegistryGR = new GlideRecord(\"e_signature_registry\");\n\tesigRegistryGR.addQuery(\"enabled\", \"true\");\n\tesigRegistryGR.query();\n\twhile(esigRegistryGR.next()) {\n\t\tesigRequiredMap[esigRegistryGR.getValue(\"table_name\")] = true;\n\t}\n}\n\nvar gr = new GlideRecord('sysapproval_approver');\ngr.chooseWindow(initRow, lastRow);\nvar qc1 = gr.addQuery(\"state\", \"requested\");\n//if (input)\n//  qc1.addOrCondition(\"sys_id\", \"IN\", input.ids);\ndata.myApprovals = getMyApprovals();\ngr.addQuery(\"approver\", data.myApprovals);\ngr.orderBy(\"sys_created_on\");\ngr.query();\nvar rowCount = gr.getRowCount();\nvar approvals = [];\nvar ids = [];\nvar source_tables = [];\n\nwhile (gr.next()) {\n  var task = getRecordBeingApproved(gr);\n\tif (!task.isValidRecord())\n\t\tcontinue;\n\n  ids.push(gr.getUniqueValue());\n  var t = {};\n  t.number = task.getDisplayValue();\n  t.short_description = task.short_description.toString();\n  if (gr.getValue(\"approver\") != gs.getUserID())\n\t  t.approver = gr.approver.getDisplayValue();\n  if (task.isValidField(\"opened_by\") && !task.opened_by.nil())\n\t  t.opened_by = task.opened_by.getDisplayValue();\n\n  // requestor >> opener\n  if (task.isValidField(\"requested_by\") && !task.requested_by.nil())\n\t  t.opened_by = task.requested_by.getDisplayValue();\n\n  t.start_date = task.start_date.getDisplayValue();\n  t.end_date = task.end_date.getDisplayValue();\n  t.quantity = task.quantity.getDisplayValue();\n  t.table = task.getLabel();\n  if (task.getValue(\"price\") > 0)\n\t  t.price = task.getDisplayValue(\"price\");\n\n  if (task.getValue(\"recurring_price\") > 0)\n\t  t.recurring_price = task.getDisplayValue(\"recurring_price\");\n\n  t.recurring_frequency = task.getDisplayValue(\"recurring_frequency\");\n\n  var items = [];\n  var idx = 0;\n  var itemsGR = new GlideRecord(\"sc_req_item\");\n  itemsGR.addQuery(\"request\", task.sys_id);\n  itemsGR.query();\n  if (itemsGR.getRowCount() > 1)\n    t.short_description = itemsGR.getRowCount() + \" requested items\";\n\n  while (itemsGR.next()) {\n    var item = {};\n    item.short_description = itemsGR.short_description.toString();\n    if (itemsGR.getValue(\"price\") > 0)\n      item.price = itemsGR.getDisplayValue(\"price\");\n    if (itemsGR.getValue(\"recurring_price\") > 0) {\n      item.recurring_price = itemsGR.getDisplayValue(\"recurring_price\");\n      item.recurring_frequency = itemsGR.getDisplayValue(\"recurring_frequency\");\n    }\n    if (itemsGR.getRowCount() == 1) {\n\t\t\titem.variables = new GlobalServiceCatalogUtil().getVariablesForTask(itemsGR, true);\n\t\t\titem.variableSummarizerWidget = $sp.getWidget('sc-variable-summarizer', {'variables' : item.variables, 'toggle' : false, 'task' :t.number });\n      t.short_description = itemsGR.short_description.toString();\n    }\n\n    items[idx] = item;\n    idx++;\n  }\n\n  var j = {};\n  j.sys_id = gr.getUniqueValue();\n  j.table = gr.getRecordClassName();\n\tj.approval_source_table = gr.getValue(\"source_table\");\n\tif (!j.approval_source_table)\n\t\tj.approval_source_table = gr.sysapproval.sys_class_name + \"\";\n\tj.requireEsigApproval = esigRequiredMap[j.approval_source_table];\n\tj.task = t;\n  if (task) {\n\t\tj.variables = new GlobalServiceCatalogUtil().getVariablesForTask(task, true);\n\t\tj.variableSummarizerWidget = $sp.getWidget('sc-variable-summarizer', {'variables' : j.variables, 'toggle' : false, 'task': t.number });\n\t}\n  j.items = items;\n  j.state = gr.getValue(\"state\");\n  j.stateLabel = gr.state.getDisplayValue();\n  approvals.push(j);\n}\n\ndata.ids = ids;\ndata.approvals = approvals;\ndata.showApprovals = gs.getUser().hasRole('approver_user');\n// for pagination\ndata.pagination = {};\ndata.pagination.hasNext = (approvals.length == (parseInt(lastRow) - parseInt(initRow)) && lastRow < rowCount);\ndata.pagination.hasPrevious = parseInt(initRow) > 0;\ndata.pagination.from = parseInt(initRow + 1);\ndata.pagination.to = parseInt(lastRow) < parseInt(rowCount) ? parseInt(lastRow) : parseInt(rowCount);\ndata.pagination.of = parseInt(rowCount);\ndata.pagination.showPagination = data.pagination.hasPrevious || data.pagination.hasNext;\ndata.pagination.currentPage = data.pagination.from > data.pagination.to ? currentPage -1 : currentPage;\ndelete g_approval_form_request;\nfunction getRecordBeingApproved(gr) {\n  if (!gr.sysapproval.nil())\n    return gr.sysapproval.getRefRecord();\n\n  return gr.document_id.getRefRecord();\n}\n\t\n\t\n",
            "readonly": false,
            "hint": "",
            "name": "script",
            "attributes": {},
            "choice": 0,
            "value": "g_approval_form_request = true;\n\n//we get only a max number of elements to avoid to have a big list of it\nvar maxNumberOfItemsInTheList = parseInt(options.max_number_of_elements_shown_on_the_list);\n//set 10 if maxnumber is undefined, empty or negative value\nmaxNumberOfItemsInTheList = maxNumberOfItemsInTheList>0 ? maxNumberOfItemsInTheList : 10; \nvar initRow = 0;\nvar lastRow = maxNumberOfItemsInTheList;\nvar currentPage = 0; //0 is the first page\nif (input) {\n\t// update pagination\n\tcurrentPage = input.pagination.currentPage;\n\tinitRow = (currentPage * maxNumberOfItemsInTheList);\n\tlastRow = initRow + maxNumberOfItemsInTheList;\n\t\n\tif (input.op == 'approved' || input.op == 'rejected') {\n\t\tvar app = new GlideRecord(\"sysapproval_approver\");\n\t\tif (app.get(input.target)) {\n\t\t\tvar isMine = gs.hasRole(\"approval_admin\") || (gs.hasRole(\"approver_user\") && isApprovalMine(app));\n\t\t\tif (isMine) {\n\t\t\t\tapp.state = input.op;\n\t\t\t\tapp.update();\n\t\t\t\tif (currentPage > 0 && !input.pagination.hasNext && input.approvals.length == 1) {\n\t\t\t\t\tcurrentPage--;\n\t\t\t\t\tinitRow = (currentPage * maxNumberOfItemsInTheList);\n\t\t\t\t\tlastRow = initRow + maxNumberOfItemsInTheList;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\ndata.ViewApprovalPageMsg = gs.getMessage(\"View approval page\");\ndata.esignature = {\n\tusername:  gs.getUserName(),\n\tuserSysId: gs.getUserID(),\n\te_sig_required: GlidePluginManager.isRegistered('com.glide.e_signature_approvals')\n};\n\nvar esigRequiredMap = {};\nif (data.esignature.e_sig_required) {\n\tvar esigRegistryGR = new GlideRecord(\"e_signature_registry\");\n\tesigRegistryGR.addQuery(\"enabled\", \"true\");\n\tesigRegistryGR.query();\n\twhile(esigRegistryGR.next()) {\n\t\tesigRequiredMap[esigRegistryGR.getValue(\"table_name\")] = true;\n\t}\n}\n\nvar gr = new GlideRecord('sysapproval_approver');\ngr.chooseWindow(initRow, lastRow);\nvar qc1 = gr.addQuery(\"state\", \"requested\");\n//if (input)\n//  qc1.addOrCondition(\"sys_id\", \"IN\", input.ids);\ndata.myApprovals = getMyApprovals();\ngr.addQuery(\"approver\", data.myApprovals);\ngr.orderBy(\"sys_created_on\");\ngr.query();\nvar rowCount = gr.getRowCount();\nvar approvals = [];\nvar ids = [];\nvar source_tables = [];\n\nwhile (gr.next()) {\n  var task = getRecordBeingApproved(gr);\n\tif (!task.isValidRecord())\n\t\tcontinue;\n\n  ids.push(gr.getUniqueValue());\n  var t = {};\n  t.number = task.getDisplayValue();\n  t.short_description = task.short_description.toString();\n  if (gr.getValue(\"approver\") != gs.getUserID())\n\t  t.approver = gr.approver.getDisplayValue();\n  if (task.isValidField(\"opened_by\") && !task.opened_by.nil())\n\t  t.opened_by = task.opened_by.getDisplayValue();\n\n  // requestor >> opener\n  if (task.isValidField(\"requested_by\") && !task.requested_by.nil())\n\t  t.opened_by = task.requested_by.getDisplayValue();\n\n  t.start_date = task.start_date.getDisplayValue();\n  t.end_date = task.end_date.getDisplayValue();\n  t.quantity = task.quantity.getDisplayValue();\n  t.table = task.getLabel();\n  if (task.getValue(\"price\") > 0)\n\t  t.price = task.getDisplayValue(\"price\");\n\n  if (task.getValue(\"recurring_price\") > 0)\n\t  t.recurring_price = task.getDisplayValue(\"recurring_price\");\n\n  t.recurring_frequency = task.getDisplayValue(\"recurring_frequency\");\n\n  var items = [];\n  var idx = 0;\n  var itemsGR = new GlideRecord(\"sc_req_item\");\n  itemsGR.addQuery(\"request\", task.sys_id);\n  itemsGR.query();\n  if (itemsGR.getRowCount() > 1)\n    t.short_description = itemsGR.getRowCount() + \" requested items\";\n\n  while (itemsGR.next()) {\n    var item = {};\n    item.short_description = itemsGR.short_description.toString();\n    if (itemsGR.getValue(\"price\") > 0)\n      item.price = itemsGR.getDisplayValue(\"price\");\n    if (itemsGR.getValue(\"recurring_price\") > 0) {\n      item.recurring_price = itemsGR.getDisplayValue(\"recurring_price\");\n      item.recurring_frequency = itemsGR.getDisplayValue(\"recurring_frequency\");\n    }\n    if (itemsGR.getRowCount() == 1) {\n\t\t\titem.variables = new GlobalServiceCatalogUtil().getVariablesForTask(itemsGR, true);\n\t\t\titem.variableSummarizerWidget = $sp.getWidget('sc-variable-summarizer', {'variables' : item.variables, 'toggle' : false, 'task' :t.number });\n      t.short_description = itemsGR.short_description.toString();\n    }\n\n    items[idx] = item;\n    idx++;\n  }\n\n  var j = {};\n  j.sys_id = gr.getUniqueValue();\n  j.table = gr.getRecordClassName();\n\tj.approval_source_table = gr.getValue(\"source_table\");\n\tif (!j.approval_source_table)\n\t\tj.approval_source_table = gr.sysapproval.sys_class_name + \"\";\n\tj.requireEsigApproval = esigRequiredMap[j.approval_source_table];\n\tj.task = t;\n  if (task) {\n\t\tj.variables = new GlobalServiceCatalogUtil().getVariablesForTask(task, true);\n\t\tj.variableSummarizerWidget = $sp.getWidget('sc-variable-summarizer', {'variables' : j.variables, 'toggle' : false, 'task': t.number });\n\t}\n  j.items = items;\n  j.state = gr.getValue(\"state\");\n  j.stateLabel = gr.state.getDisplayValue();\n  approvals.push(j);\n}\n\ndata.ids = ids;\ndata.approvals = approvals;\ndata.showApprovals = gs.getUser().hasRole('approver_user');\n// for pagination\ndata.pagination = {};\ndata.pagination.hasNext = (approvals.length == (parseInt(lastRow) - parseInt(initRow)) && lastRow < rowCount);\ndata.pagination.hasPrevious = parseInt(initRow) > 0;\ndata.pagination.from = parseInt(initRow + 1);\ndata.pagination.to = parseInt(lastRow) < parseInt(rowCount) ? parseInt(lastRow) : parseInt(rowCount);\ndata.pagination.of = parseInt(rowCount);\ndata.pagination.showPagination = data.pagination.hasPrevious || data.pagination.hasNext;\ndata.pagination.currentPage = data.pagination.from > data.pagination.to ? currentPage -1 : currentPage;\ndelete g_approval_form_request;\nfunction getRecordBeingApproved(gr) {\n  if (!gr.sysapproval.nil())\n    return gr.sysapproval.getRefRecord();\n\n  return gr.document_id.getRefRecord();\n}\n\t\n\t\n",
            "max_length": 65000,
            "ed": {
                "name": "script"
            }
        },
        "has_preview": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -7,
            "label": "Has preview",
            "sys_readonly": false,
            "type": "boolean",
            "mandatory": false,
            "displayValue": "false",
            "readonly": false,
            "hint": "Defines whether preview data is available",
            "name": "has_preview",
            "attributes": {},
            "choice": 0,
            "value": "false",
            "max_length": 40,
            "ed": {
                "name": "has_preview"
            }
        },
        "public": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -7,
            "label": "Public",
            "sys_readonly": false,
            "type": "boolean",
            "mandatory": false,
            "displayValue": "false",
            "readonly": false,
            "hint": "Widget publicly available to unauthenticated users",
            "name": "public",
            "attributes": {
                "update_exempt": "true"
            },
            "choice": 0,
            "value": "false",
            "max_length": 40,
            "ed": {
                "name": "public"
            }
        },
        "docs": {
            "sys_mandatory": false,
            "visible": true,
            "table_attributes": {
                "update_synch": "true",
                "synch_attachments": "true"
            },
            "dbType": 12,
            "label": "Docs",
            "sys_readonly": false,
            "type": "reference",
            "mandatory": false,
            "refTable": "sp_documentation",
            "reference_type": "table",
            "displayValue": "",
            "readonly": false,
            "hint": "",
            "name": "docs",
            "attributes": {
                "encode_utf8": "false"
            },
            "reference_key": "sys_id",
            "readonlyClickthrough": false,
            "choice": 0,
            "value": "",
            "max_length": 32,
            "ed": {
                "reference": "sp_documentation",
                "searchField": "title",
                "defaultOperator": "STARTSWITH",
                "name": "docs"
            }
        },
        "client_script": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": -1,
            "label": "Client controller",
            "sys_readonly": false,
            "type": "script",
            "mandatory": false,
            "displayValue": "function ($scope, spUtil, spUIActionsExecuter, $timeout) {\n\tvar ESIGNATURE = {\n\t\tTYPE: \"form\",\n\t\tAPPROVE_SYS: \"cbfe291147220100ba13a5554ee4904d\",\n\t\tREJECT_SYS: \"580f711147220100ba13a5554ee4904b\"\n\t};\n\n\tif ($scope.options.portal == true || $scope.options.portal == 'true') {\n\t\t$scope.contentColClass = \"col-xs-12\";\n\t\t$scope.options.portal = true;\n\t} else {\n\t\t$scope.options.portal = false;\n\t\t$scope.contentColClass = \"col-sm-8\";\n\t}\n\n\t$scope.data.op = \"\";\n\tspUtil.recordWatch($scope, \"sysapproval_approver\", \"state=requested^approverIN\" + $scope.data.myApprovals.toString(), function(data) {\n\t\t// don't double-roundtrip if update came from record just approved/rejected\n\t\tif (data.data.sys_id != $scope.data.target)\n\t\t\tspUtil.update($scope);\n\t});\n\n\tfunction get(id) {\n\t\tspUtil.update($scope).then(function(result) {\n\t\t\t$timeout(function () {\n\t\t\t\tvar approvalIds = result && result.ids;\n\t\t\t\t// Set focus on last element\n\t\t\t\tif (id == -1)\n\t\t\t\t\tid = approvalIds[approvalIds.length - 1];\n\t\t\t\t// set focus on first element\n\t\t\t\telse if (id == 0)\n\t\t\t\t\tid = approvalIds[0];\n\t\t\t\tvar key = id == \"no-approval\" ? \"no-approval\" : (\"approval_task_\" + id);\n\t\t\t\tsetFocus(key);\n\t\t\t}, 500);\n\t\t});\n\t}\n\n\tfunction setFocus(id) {\n\t\tvar ele = document.getElementById(id);\n\t\tif (ele)\n\t\t\tele.focus();\n\t}\n\n\tfunction getNextApproval(id) {\n\t\tvar approvals = $scope.data.ids,\n\t\tcurrentIndex = approvals.indexOf(id),\n\t\thasNext = $scope.data.pagination.hasNext,\n\t\thasPrevious = $scope.data.pagination.hasPrevious;\n\n\t\t// Action on only approval and no approval left\n\t\tif (approvals.length == 1 && !hasNext && !hasPrevious)\n\t\t\treturn \"no-approval\";\n\t\t// Action on only approval in last page\n\t\tif (approvals.length == 1 && !hasNext)\n\t\t\treturn 0;\n\t\t// Action on last approval item in current page\n\t\tif (currentIndex == approvals.length - 1 && hasNext)\n\t\t\treturn -1;\n\t\t// Action on last approval item in last page\n\t\tif (currentIndex == approvals.length - 1)\n\t\t\treturn approvals[currentIndex - 1];\n\n\t\tif (currentIndex >= 0 && currentIndex < approvals.length - 1)\n\t\t\treturn approvals[currentIndex + 1]\n\t}\n\n\t$scope.approve = function(id, esigRequired) {\n\t\tvar requestParams = {\n\t\t\tusername: $scope.data.esignature.username,\n\t\t\tuserSysId: $scope.data.esignature.userSysId\n\t\t};\n\n\t\tif($scope.data.esignature.e_sig_required && esigRequired) {\n\t\t\tspUIActionsExecuter.executeFormAction(ESIGNATURE.APPROVE_SYS, \"sysapproval_approver\" , id, [] , \"\", requestParams).then(function(response) {\n\t\t\t});\t\t\t\n\t\t} else {\n\t\t\t$scope.data.op = \"approved\";\n\t\t\t$scope.data.target = id;\n\t\t\tget(getNextApproval(id));\n\t\t}\n  }\n\n\t$scope.reject = function(id, esigRequired) {\n\t\tvar requestParams = {\n\t\t\tusername: $scope.data.esignature.username,\n\t\t\tuserSysId: $scope.data.esignature.userSysId\n\t\t};\n\n\t\tif($scope.data.esignature.e_sig_required && esigRequired) {\n\t\t\tspUIActionsExecuter.executeFormAction(ESIGNATURE.REJECT_SYS, \"sysapproval_approver\" , id, [] , \"\", requestParams).then(function(response) {\n\t\t\t});\n\t\t} else {\n\t\t\t$scope.data.op = \"rejected\";\n\t\t\t$scope.data.target = id;\n\t\t\tget(getNextApproval(id));\n\t\t}\n\t}\n\n\t// pagination\n\t$scope.previousPage = function() {\n\t\tif ($scope.data.pagination.currentPage > 1)\n\t\t\t$scope.data.pagination.currentPage = $scope.data.pagination.currentPage - 1;\n\t\telse\n\t\t\t$scope.data.pagination.currentPage = 0;\n      \n\t\t$scope.data.op = \"previous\";\n\t\t$scope.data.target = null;\n\n\t\tget(0);\n\t}\n\n\t$scope.nextPage = function() {\n\t\t$scope.data.op = \"next\";\n\t\t$scope.data.target = null;\n\t\t$scope.data.pagination.currentPage = $scope.data.pagination.currentPage+1;\n\t\tget(0);\n\t}\n\t\n\t$scope.getItemDisplay = function(task) {\n\t\tif (task.number && task.short_description)\n\t\t\treturn task.number + \" - \" + task.short_description;\n\t\t\n\t\treturn task.number || task.short_description || \"\";\n\t}\n}",
            "readonly": false,
            "hint": "",
            "name": "client_script",
            "attributes": {
                "client_script": "true"
            },
            "choice": 0,
            "value": "function ($scope, spUtil, spUIActionsExecuter, $timeout) {\n\tvar ESIGNATURE = {\n\t\tTYPE: \"form\",\n\t\tAPPROVE_SYS: \"cbfe291147220100ba13a5554ee4904d\",\n\t\tREJECT_SYS: \"580f711147220100ba13a5554ee4904b\"\n\t};\n\n\tif ($scope.options.portal == true || $scope.options.portal == 'true') {\n\t\t$scope.contentColClass = \"col-xs-12\";\n\t\t$scope.options.portal = true;\n\t} else {\n\t\t$scope.options.portal = false;\n\t\t$scope.contentColClass = \"col-sm-8\";\n\t}\n\n\t$scope.data.op = \"\";\n\tspUtil.recordWatch($scope, \"sysapproval_approver\", \"state=requested^approverIN\" + $scope.data.myApprovals.toString(), function(data) {\n\t\t// don't double-roundtrip if update came from record just approved/rejected\n\t\tif (data.data.sys_id != $scope.data.target)\n\t\t\tspUtil.update($scope);\n\t});\n\n\tfunction get(id) {\n\t\tspUtil.update($scope).then(function(result) {\n\t\t\t$timeout(function () {\n\t\t\t\tvar approvalIds = result && result.ids;\n\t\t\t\t// Set focus on last element\n\t\t\t\tif (id == -1)\n\t\t\t\t\tid = approvalIds[approvalIds.length - 1];\n\t\t\t\t// set focus on first element\n\t\t\t\telse if (id == 0)\n\t\t\t\t\tid = approvalIds[0];\n\t\t\t\tvar key = id == \"no-approval\" ? \"no-approval\" : (\"approval_task_\" + id);\n\t\t\t\tsetFocus(key);\n\t\t\t}, 500);\n\t\t});\n\t}\n\n\tfunction setFocus(id) {\n\t\tvar ele = document.getElementById(id);\n\t\tif (ele)\n\t\t\tele.focus();\n\t}\n\n\tfunction getNextApproval(id) {\n\t\tvar approvals = $scope.data.ids,\n\t\tcurrentIndex = approvals.indexOf(id),\n\t\thasNext = $scope.data.pagination.hasNext,\n\t\thasPrevious = $scope.data.pagination.hasPrevious;\n\n\t\t// Action on only approval and no approval left\n\t\tif (approvals.length == 1 && !hasNext && !hasPrevious)\n\t\t\treturn \"no-approval\";\n\t\t// Action on only approval in last page\n\t\tif (approvals.length == 1 && !hasNext)\n\t\t\treturn 0;\n\t\t// Action on last approval item in current page\n\t\tif (currentIndex == approvals.length - 1 && hasNext)\n\t\t\treturn -1;\n\t\t// Action on last approval item in last page\n\t\tif (currentIndex == approvals.length - 1)\n\t\t\treturn approvals[currentIndex - 1];\n\n\t\tif (currentIndex >= 0 && currentIndex < approvals.length - 1)\n\t\t\treturn approvals[currentIndex + 1]\n\t}\n\n\t$scope.approve = function(id, esigRequired) {\n\t\tvar requestParams = {\n\t\t\tusername: $scope.data.esignature.username,\n\t\t\tuserSysId: $scope.data.esignature.userSysId\n\t\t};\n\n\t\tif($scope.data.esignature.e_sig_required && esigRequired) {\n\t\t\tspUIActionsExecuter.executeFormAction(ESIGNATURE.APPROVE_SYS, \"sysapproval_approver\" , id, [] , \"\", requestParams).then(function(response) {\n\t\t\t});\t\t\t\n\t\t} else {\n\t\t\t$scope.data.op = \"approved\";\n\t\t\t$scope.data.target = id;\n\t\t\tget(getNextApproval(id));\n\t\t}\n  }\n\n\t$scope.reject = function(id, esigRequired) {\n\t\tvar requestParams = {\n\t\t\tusername: $scope.data.esignature.username,\n\t\t\tuserSysId: $scope.data.esignature.userSysId\n\t\t};\n\n\t\tif($scope.data.esignature.e_sig_required && esigRequired) {\n\t\t\tspUIActionsExecuter.executeFormAction(ESIGNATURE.REJECT_SYS, \"sysapproval_approver\" , id, [] , \"\", requestParams).then(function(response) {\n\t\t\t});\n\t\t} else {\n\t\t\t$scope.data.op = \"rejected\";\n\t\t\t$scope.data.target = id;\n\t\t\tget(getNextApproval(id));\n\t\t}\n\t}\n\n\t// pagination\n\t$scope.previousPage = function() {\n\t\tif ($scope.data.pagination.currentPage > 1)\n\t\t\t$scope.data.pagination.currentPage = $scope.data.pagination.currentPage - 1;\n\t\telse\n\t\t\t$scope.data.pagination.currentPage = 0;\n      \n\t\t$scope.data.op = \"previous\";\n\t\t$scope.data.target = null;\n\n\t\tget(0);\n\t}\n\n\t$scope.nextPage = function() {\n\t\t$scope.data.op = \"next\";\n\t\t$scope.data.target = null;\n\t\t$scope.data.pagination.currentPage = $scope.data.pagination.currentPage+1;\n\t\tget(0);\n\t}\n\t\n\t$scope.getItemDisplay = function(task) {\n\t\tif (task.number && task.short_description)\n\t\t\treturn task.number + \" - \" + task.short_description;\n\t\t\n\t\treturn task.number || task.short_description || \"\";\n\t}\n}",
            "max_length": 8000,
            "ed": {
                "name": "client_script"
            }
        },
        "data_table": {
            "sys_mandatory": true,
            "visible": true,
            "dbType": 12,
            "default_value": "sp_instance",
            "label": "Data table",
            "sys_readonly": false,
            "type": "table_name",
            "mandatory": true,
            "displayValue": "sp_instance",
            "readonly": false,
            "hint": "",
            "name": "data_table",
            "attributes": {
                "base_table": "sp_instance",
                "base_start": "true"
            },
            "choice": 0,
            "choices": [],
            "value": "sp_instance",
            "max_length": 80,
            "ed": {
                "name": "data_table"
            }
        },
        "name": {
            "sys_mandatory": true,
            "visible": true,
            "dbType": 12,
            "label": "Name",
            "sys_readonly": false,
            "type": "translated_field",
            "mandatory": true,
            "displayValue": "Approvals_guerra",
            "readonly": false,
            "hint": "",
            "name": "name",
            "attributes": {},
            "choice": 0,
            "value": "Approvals_guerra",
            "max_length": 40,
            "ed": {
                "name": "name"
            }
        },
        "sys_scope": {
            "sys_mandatory": false,
            "visible": true,
            "table_attributes": {
                "metadata_link_exempt": "true"
            },
            "dbType": 12,
            "label": "Application",
            "sys_readonly": true,
            "type": "reference",
            "mandatory": false,
            "refTable": "sys_scope",
            "reference_type": "table",
            "displayValue": "Global",
            "readonly": true,
            "hint": "Application containing this record",
            "name": "sys_scope",
            "attributes": {
                "list_force_default": "true",
                "readonly_clickthrough": "true",
                "ignore_filter_on_new": "true"
            },
            "reference_key": "sys_id",
            "readonlyClickthrough": true,
            "choice": 0,
            "value": "global",
            "max_length": 32,
            "ed": {
                "reference": "sys_scope",
                "searchField": "name",
                "defaultOperator": "STARTSWITH",
                "name": "sys_scope"
            }
        },
        "id": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": 12,
            "label": "ID",
            "sys_readonly": false,
            "type": "string",
            "mandatory": false,
            "displayValue": "approvals_guerra",
            "readonly": false,
            "hint": "Identifier for $sp.embedWidget()",
            "name": "id",
            "attributes": {
                "edge_encryption_enabled": "true"
            },
            "choice": 0,
            "value": "approvals_guerra",
            "max_length": 40,
            "ed": {
                "name": "id"
            }
        },
        "field_list": {
            "sys_mandatory": false,
            "visible": true,
            "dependentField": "data_table",
            "dbType": -1,
            "label": "Fields",
            "sys_readonly": false,
            "type": "field_list",
            "mandatory": false,
            "displayValue": "color,glyph",
            "readonly": false,
            "hint": "",
            "name": "field_list",
            "attributes": {
                "is_multi_text": "false"
            },
            "choice": 0,
            "value": "color,glyph",
            "max_length": 1000,
            "ed": {
                "dependent_value": "sp_instance",
                "name": "field_list"
            }
        },
        "controller_as": {
            "sys_mandatory": false,
            "visible": true,
            "dbType": 12,
            "label": "controllerAs",
            "sys_readonly": false,
            "type": "string",
            "mandatory": false,
            "displayValue": "c",
            "readonly": false,
            "hint": "Identifier name for a reference to the controller in the directive's scope",
            "name": "controller_as",
            "attributes": {
                "edge_encryption_enabled": "true"
            },
            "choice": 0,
            "value": "c",
            "max_length": 100,
            "ed": {
                "name": "controller_as"
            }
        }
    }
}